<!DOCTYPE html>
<html lang="en" th:replace="~{fragments/vafterloginlayout :: vafterloginlayout (~{::body},'addRegister')}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="#">
    <link rel="stylesheet" href="stylesheets/profilevolunteer.css">
    <title>Update Registration Form</title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body style="background-color: #dfdfdf">
    <div class="container mt-3">
        <div class="card col-12 mt-3 mx-auto" style="width: 75rem; background-color: #dfdfdf">
            <div class="card-body">
                <div class="container-fluid mt-2 justify-content-center rounded p-2" style="background-color: #dfdfdf">
                    <p class="text-capitalize text-center mt-3 fw-bold" style="font-family: sans-serif; font-size: 24px; font-weight: bold;">
                        PLEASE READ THE FORM CAREFULLY
                    </p>

                    <div class="container mt-5">
                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <h2 class="text-center">Create Registration</h2>

                                <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
                                    <p th:text="${errorMessage}"></p>
                                </div>

                                <form id="registrationForm" th:action="@{/addRegister(pid=${programid})}" th:object="${registrations}" method="post" enctype="multipart/form-data">
                                    <input type="hidden" th:value="${programid}" class="form-control" name="pid" id="pid">
                                    <input type="hidden" th:value="${volunteerId}" class="form-control" name="volunteerId" id="volunteerId">
                                    
                                    <div class="mb-3">
                                        <label for="programname" class="form-label">Name</label>
                                        <input type="text" class="form-control" name="programname" th:value="${programs.pname}" placeholder="Program name" id="programname" readonly required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="programdesc" class="form-label">Description</label>
                                        <input type="text" class="form-control" name="programdesc" th:value="${programs.pdesc}" placeholder="Description" id="programdesc" readonly required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="programvenue" class="form-label">Venue</label>
                                        <input type="text" class="form-control" name="programvenue" th:value="${programs.pvenue}" placeholder="Venue" id="programvenue" readonly required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="programtime" class="form-label">Time</label>
                                        <input type="text" class="form-control" name="programtime" th:value="${programs.ptime}" placeholder="Time" id="programtime" readonly required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="programdate" class="form-label">Date</label>
                                        <input type="date" class="form-control" name="programdate" th:value="${programs.pdate}" placeholder="Date" id="programdate" disabled required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="rdate" class="form-label">Register Date:</label>
                                        <input type="date" name="rdate" id="rdate" class="form-control" readonly required>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="gridCheck1" required>
                                            <label class="form-check-label" for="gridCheck1">
                                                This registration cannot be undone
                                            </label>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary" th:disabled="${alreadyRegistered}">Create Registration</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var today = new Date().toISOString().split('T')[0];
            var rdateInput = document.getElementById('rdate');
            rdateInput.value = today;
        });
    </script>
    
    <!-- JavaScript for pop-up message -->
    <script>
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            // Simulate successful registration (replace with actual logic)
            var isRegistered = true; // Replace with your actual logic

            if (isRegistered) {
                alert('Registration successful and Please Check Your Email Notification!');
            }
        });
    </script>

    <!-- Bootstrap and Flatpickr scripts -->
    <script th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
