<!DOCTYPE html>
<html
  lang="en"
  th:replace="~{fragments/adminlayout :: adminlayout (~{::body},'viewIssue')}"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="#" />
    <title>View Issue</title>
    <link
      th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </head>
  <body>

    <div class="container-fluid" style="margin-left: 230px; padding-top: 66px">
      <div class="row" style="height: 100%">
        <div class="col-10">
          <h3>
            <a th:href="@{/addIssue}" class="btn btn-info">
                <i class="bi bi-plus-circle-fill" style="vertical-align: middle;"></i>
                Add Issue
            </a>
        </h3>

          <div
            class="offset-2 justify-content-evenly align-items-center col-9"
          ></div>
          <table class="table table-bordered border-dark image-table">
            <thead>
              <tr>
                <!-- <th scope="col">Issue ID</th> -->
                <th scope="col">Issue Name</th>
                <th scope="col">Issue Description</th>
                <th scope="col">Issue Date</th>
                <th scope="col">Issue Remark</th>
                <th scope="col">Action</th>
              </tr>
            </thead>

            <tbody>
              <tr th:each="issue: ${issuess}">
                <!-- <td th:text="${issue.iid}"></td> -->
                <td th:text="${issue.iname}"></td>
                <td th:text="${issue.idesc}"></td>
                <td th:text="${issue.idate}"></td>
                <td th:text="${issue.iremark}"></td>
                <td>
                  <div
                    class="btn-group"
                    role="group"
                    aria-label="Action buttons"
                  >
                    <a
                      th:href="@{'/updateIssue?iid=' + ${issue.iid}}"
                      class="btn btn-primary"
                      >Update</a
                    >

                    <button th:if="${role} == 'Super Admin' " type="button" class="btn btn-danger" data-bs-toggle="modal" th:data-bs-target="'#exampleModal-' + ${issue.iid}">Delete</button>
                  </div>

                  
                </td>

                <form action="/deleteIssue" method="post">
                  <input type="hidden" th:value="${issue.iid}" name="iid" />
                  <div
                    class="modal fade"
                    th:id="'exampleModal-' + ${issue.iid}"
                    tabindex="-1"
                    role="dialog"
                    aria-labelledby="deleteModalLabel"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="deleteModalLabel">Delete Issue</h5>
                        </div>
                        <div class="modal-body">
                          <p>Are you sure you want to delete this issue?</p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                          <button id="deleteButton" class="btn btn-danger" type="submit">Delete</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
                
              </tr>

              
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script
      th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js}"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js}"
      integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
      crossorigin="anonymous"
    ></script>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
